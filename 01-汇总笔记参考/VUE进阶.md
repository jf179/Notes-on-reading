# VUEè¿›é˜¶

æ³¨é‡Šï¼švueæ’ä»¶ï¼šveturè¯­æ·è¯­æ³•æç¤º

## @å…³é”®å­—

- @è¡¨ç¤ºä¸€ä¸ªè·¯å¾„ï¼Œå¦‚img src='@assets/logo.jpg'; ç”¨äºç®€åŒ–è·¯å¾„åµŒå±‚æ—¶æŸ¥æ‰¾ï¼Œ
- å¯¼å…¥ç»„ä»¶å’Œæ’ä»¶æ—¶ä¹Ÿå¯ä»¥ç”¨å¦‚ï¼šimport hello from '@/components/hello.vue'
- cssæ ·å¼çš„ä½¿ç”¨ï¼š@import url('~ @assets/index.css'); urlé‡Œé¢å¼€å¤´æ˜¯~æ³¢æµªçº¿æ¥@ä¸­é—´æ²¡æœ‰ç©ºæ ¼ğŸ˜

## nameçš„ä½¿ç”¨

æ³¨é‡Šï¼šåœ¨é¡µé¢æ ‡ç­¾å†…æˆ–æ–¹æ³•å†…äº›ä¸ªnameåï¼Œæœ‰åˆ©äºVUEè°ƒå¼æ—¶ä½¿ç”¨èƒ½æ–¹ä¾¿çš„æ‰¾åˆ°é¡µé¢ç»“æ„



## vueè„šæ‰‹æ¶ä¸­ä½¿ç”¨less

æ³¨é‡Šï¼šlessé¢„å¤„ç†å™¨ï¼Œå®˜ç½‘æœ‰è¯´æ˜

- å®‰è£…ï¼šnpm install -D less-loader less
- ä½¿ç”¨ï¼šåœ¨ç»„ä»¶æ ·å¼styleæ ‡ç­¾ä¸­ ä½¿ç”¨å¦‚ä¸‹;å¦‚æœæŠ¥é”™å°±æŸ¥çœ‹æ˜¯å¦ç‰ˆæœ¬é—®é¢˜ã€æ¢ä¸€ä¸ªä½ç‰ˆæœ¬å®‰è£…

```css
<style lang='less'></style>
```



# lodashå‡½æ•°åº“çš„ä½¿ç”¨

æ³¨é‡Šï¼šå¼ºå¤§çš„å‡½æ•°åº“

- å®‰è£…ï¼šnpm install lodash --save
- å…¨å±€å¯¼å…¥ï¼šimport lodash from 'lodash'
- å…¨å±€æ³¨å†Œï¼šVue.prototype.$lodash= lodash
- ä½¿ç”¨ï¼šthis.$lodashæˆ–ç›´æ¥ä¹¦å†™ _.cloneDeep()è¿™æ ·





## æ…•å®¢çš„ä½¿ç”¨

æ³¨é‡Šï¼šè¿›å…¥é¡¹ç›®è®¾è®¡ç¨¿é‡Œé¢æœ‰å¼€å‘ æ¨¡å¼ï¼Œé¢„è§ˆæ¨¡å¼ï¼Œ

- å¼€å‘æ¨¡å¼å¯ä»¥æ˜¾ç¤ºå°ºå¯¸æ ·å¼cssä»£ç ã€ ä¸‹è½½åˆ‡å›¾æ“ä½œç­‰(ä¸‹è½½çš„å›¾ç‰‡æŠ¥è§£å‹é‡Œé¢æœ‰2å¼ å›¾ï¼Œ1å¼ 2å€1å¼ 1å€)
- é¢„è§ˆæ¨¡å¼ï¼šä¸“æ³¨äºé¢„è§ˆ
- æ¸…é™¤å†…å¤–è¾¹è·åœ¨App.vueæ ¹ç»„ä»¶è®¾ç½®ğŸ˜
- å¦‚æœè®¾ç½®çš„é¡µé¢å®½åº¦éœ€è¦æ›´æ”¹æœ€å¥½ä¹Ÿåœ¨App.vue å› ä¸ºå®ƒå°±æ˜¯è·¯ç”±å±•ç¤ºå£

```css
html,body, .app{ // ç»™å®ƒè®¾ç½®100%é«˜åº¦ å¦åˆ™å…¶ä»–ç»„ä»¶å†…çš„æœ€å¤–å±‚å…ƒç´ å°±æ˜¯é å†…å®¹å†³å®šé«˜åº¦
    height: 100%;
}
```

## æœ¬åœ°è·¨åŸŸ

- åœ¨Cç›˜æ ¹ç›®å½•å»ºç«‹ï¼šC:\MyChromeDevUserData æ–‡ä»¶å¤¹
- å†åˆ›å»ºä¸€ä¸ªè°·æ­Œæµè§ˆå™¨çš„å¿«æ·æ–¹å¼
- åœ¨å¿«æ·æ–¹å¼ä¸Šç‚¹å‡»å³é”®==ã€‹å±æ€§==ã€‹ç›®æ ‡è¾“å…¥æ¡†é‡Œæœ€ååŠ ä¸Š(è®°å¾—è¦æœ‰ä¸€ä¸ªç©ºæ ¼)  --disable-web-security --user-data-dir=C:\MyChromeDevUserDataï¼Œ --user-data-dirçš„å€¼å°±æ˜¯åˆšæ‰æ–°å»ºçš„ç›®å½•ã€‚
- ç‚¹å‡»åº”ç”¨å’Œç¡®å®šåå…³é—­å±æ€§é¡µé¢ï¼Œå¹¶æ‰“å¼€chromeæµè§ˆå™¨ã€‚
- æç¤ºæœ‰ ä½ ä½¿ç”¨çš„æ˜¯ä¸å—æ”¯æŒçš„å‘½ä»¤è¡Œæ ‡è®°â€œ--disable-web-securityâ€ç›¸å…³çš„æç¤ºï¼Œè¯´æ˜chromeåˆèƒ½æ­£å¸¸è·¨åŸŸå·¥ä½œäº†ã€‚



## åŸºåœ°å€ä½¿ç”¨

```js
//å°†åŸºåœ°å€å®šä¹‰æˆå˜é‡ å†é‡‡å–æ‹¼æ¥å‚æ•°çš„æ–¹å¼ï¼Œå‚æ•°è®°å¾—å†åŠ å¼•å·
<img class="codeImg" :src="baseURL + '/captcha?type=login'" alt="">
data () {
    return {
      form: {//å°†è¦ç”¨çš„å±æ€§é›†åˆåˆ°ä¸€ä¸ªå¯¹è±¡é‡Œé¢æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†è·å–
        phone: '', // æ‰‹æœºå·
        password: ''
      },
      //å°†åœ°å€å®šä¹‰æˆä¸€ä¸ªå˜é‡
      baseURL:'http://127.0.0.1/heimamm/public'
    }
  }
}
```



## è¡¨å•éªŒè¯

- ä½¿ç”¨elementuiæä¾›çš„éªŒè¯æ–¹å¼ï¼Œä¸ä¼šå°±çœ‹å®ƒå®˜æ–¹æ–‡æ¡£ï¼Œé‡Œé¢é™¤äº†æ ¡éªŒè¿˜æœ‰äº‹ä»¶æ–¹æ³•æ­£åˆ™ç­‰ä¾›ä½¿ç”¨



## é”™è¯¯é›†åˆ

- Invalid prop: type check failed for prop "rules". Expected Object, got Strin éªŒè¯è§„åˆ™ç±»å‹é”™è¯¯ï¼Œä¸€èˆ¬æ˜¯:rules="rules"å‰é¢æ²¡æœ‰åŠ å†’å·ï¼Œæˆ–è€…valueä¹Ÿå°±æ˜¯éªŒè¯è§„åˆ™çš„æ•°æ®ç±»å‹ä¸å¯¹



# ç¯å¢ƒå˜é‡

æ³¨é‡Šï¼šå°†æ¥å£èµ‹å€¼ç»™å˜é‡ ä»¥ä¾¿å¤ç”¨ï¼Œå«åšåŸºåœ°å€ï¼Œè€Œæ¥å£åœ°å€å•ç‹¬æ”¾ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå…¨å±€é…ç½®ï¼Œå°±ä¸éœ€è¦å†æ¯ä¸ªç»„ä»¶éƒ½å®šä¹‰ä¸€æ¬¡åŸºåœ°å€äº†ã€‚ä¹Ÿæ–¹ä¾¿ä¿®æ”¹åœ°å€ï¼Œå°±å«åšæ¢å°†å˜é‡ã€‚ç¯å¢ƒå˜é‡åˆ†2ç§ï¼šå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒ

1. å¼€å‘ç¯å¢ƒï¼š.env.development  :ç›´æ¥åœ¨æ ¹ç›®å½•å»ºç«‹æ­¤æ–‡ä»¶ åªåœ¨ç”Ÿæˆç¯å¢ƒæœ‰æ•ˆ
2. ç”Ÿäº§ç¯å¢ƒï¼š.env.production   :ç›´æ¥åœ¨æ ¹ç›®å½•å»ºç«‹æ­¤æ–‡ä»¶  åªåœ¨å¼€å‘ç¯å¢ƒæœ‰æ•ˆ
3. ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹

```js
-----åˆ›å»ºenv.developmentæ–‡ä»¶ å¹¶é…ç½®ç¯å¢ƒæ³¨æ„å¤§å†™
VUE_APP_BASEURL = http://127.0.0.1/heimamm/public
------ç»„ä»¶é—´ä½¿ç”¨
// æ„æ€æ˜¯å°†ç¯å¢ƒåŸºåœ°å€èµ‹å€¼ç»™baseURL ä½¿ç”¨æ—¶è·Ÿä¹‹å‰ä¸€æ · å˜é‡æ‹¼æ¥å‚æ•°èŠç§‘
baseURL: process.env.VUE_APP_BASE //å°†ç¯å¢ƒè¿›ç¨‹èµ‹å€¼ç»™å˜é‡ï¼Œå¹¶é‡å¯npm runserve
```



## axioså°è£…

æ³¨é‡Šï¼šå°†ç½‘ç»œè¯·æ±‚çš„ä¸œè¥¿å°è£…åˆ°å·¥å…·æ–‡ä»¶å¤¹

```js
// utils æ–‡ä»¶ ä¸“é—¨ç”¨äºå­˜æ”¾å¤„ç†ç½‘ç»œè¯·æ±‚çš„ä»£ç  
// 1 å¯¼å…¥
import axios from 'axios'
// 2 åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ axios å®ä¾‹å‰¯æœ¬
  var instance = axios.create({
      baseURL: 'http://127.0.0.1/heimamm/public'
  })
// 3 å°†å®ä¾‹å‰¯æœ¬æš´éœ²å‡ºå»
export default instance  // è¿™ä¸ªå¯ä»¥ç›´æ¥åˆ°ç»„ä»¶å†…ä½¿ç”¨ä¹Ÿå¯ä»¥æ¥ç€æŠ½ç¦»apiå°è£… å¦‚ä¸‹

-----æŠ½ç¦»ç½‘ç»œè¯·æ±‚ç»§ç»­å°è£…æˆapiæ¥å£å‡½æ•°
// ç”¨äºå­˜æ”¾æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚
// å¯¼å…¥å°è£…çš„axioså®ä¾‹å‰¯æœ¬ _httpå°±æ˜¯axiosæš´éœ²çš„instance ç›¸å½“äºå‘ç”¨äºç»„ä»¶å†…çš„instanceå•ç‹¬å†è¿™é‡Œåˆè¿›è¡Œäº†çŸ­ä¿¡è·å–çš„å°è£…
// åŒä¸€ä¸ªç»„ä»¶å¦‚æœç”¨çš„éƒ½æ˜¯è¿™ä¸ªå°è£…apiçš„åŠŸèƒ½åªéœ€è¦å¯¼å…¥ä¸€æ¬¡åœ¨å¤§æ‹¬å·å†™ä¸Šå¯¹åº”çš„æ–¹æ³•å³å¯
import _http from '@/utils/request.js'
// å°è£…è·å–çŸ­ä¿¡æ¥å£  æŒ‰éœ€å¯¼å‡º å¤–éƒ¨ç»„ä»¶ä¹Ÿæ˜¯æŒ‰éœ€å¯¼å‡º
export function getCode({
    code,
    phone
}) {
  return _http({
      url: '/sendsms',
      method: 'POST',
      data: {
          code: code,
          phone: phone
      },
      //æºå¸¦kooie
      withCredentials: true
   })
}
------ç»„ä»¶å¯¼å‡ºä½¿ç”¨
import { getCode,å¯ä»¥æŒ‰éœ€å¯¼å‡ºå¤šä¸ªæ–¹æ³•å‡½æ•°} from "@/api/index.js";  
getCode({}) // ç½‘ç»œè¯·æ±‚å†™åœ¨å†…éƒ¨è·Ÿaxiosä¸€æ ·
```



# axiosæ‹¦æˆªå™¨

æ³¨é‡Šï¼šåˆ†ä¸º è¯·æ±‚æ‹¦æˆªå™¨ ä¸ å“åº”æ‹¦æˆªå™¨ï¼Œå®é™…æ˜¯axiosæä¾›çš„ä¸€ç»„å›è°ƒå‡½æ•° ç”¨äºåœ¨ç‰¹å®šçš„æ—¶å€™æ·»åŠ è‡ªå®šä¹‰é€»è¾‘

- è¯·æ±‚æ‹¦æˆªå™¨ ï¼š è¯·æ±‚ä¹‹å‰è§¦å‘çš„å›è°ƒå‡½æ•° - å¯¹è¯·æ±‚åšäº›ä»€ä¹ˆè¦æ±‚
- å“åº”æ‹¦æˆªå™¨ ï¼š æ•°æ®å“åº”è¿”å›æ—¶è§¦å‘çš„å›è°ƒå‡½æ•°ï¼Œ-å¯¹å“åº”æ•°æ®åšäº›ä»€ä¹ˆ 


```js
// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨  è° è¦ç”¨å®ƒï¼Œé‚£ä¹ˆå°±ç”¨è°æ›¿ä»£axiosã€‚æ¯”å¦‚axiosçš„å®ä¾‹å‰¯æœ¬å˜é‡åé‚£å°±å°†å…¶æ›¿æ¢å¼€å¤´çš„axios,ç›¸å½“äºaxioså‘èµ·è¯·æ±‚æ—¶ä¹Ÿä¼šè°ƒç”¨æ‹¦æˆªå™¨è¿›è¡Œå¤„ç† å¦‚ä¸‹
var instance = axios.create({
  baseURL: 'http://127.0.0.1/heimamm/public', // å½“å‰ instance å‰¯æœ¬å‘é€è¯·æ±‚æ—¶çš„åŸºæœ¬åœ°å€
  withCredentials: true // å‘é€è¯·æ±‚æ—¶ï¼Œæºå¸¦ token
})
-----æ‹¦æˆªå™¨ instanceæ›¿æ¢ä¸‹é¢çš„å¼€å¤´axios è¡¨ç¤ºç»„ä»¶è°ƒç”¨instanceæ¥å£æ—¶ æ‹¦æˆªå™¨ä¹Ÿä¼šç”Ÿæ•ˆ
axios.interceptors.request.use(function (config) {
    // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
    return config;
  }, function (error) {
    // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
    return Promise.reject(error);
  });

// æ·»åŠ å“åº”æ‹¦æˆªå™¨
axios.interceptors.response.use(function (response) {
    // å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ
    return response;
  }, function (error) {
    // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ
    return Promise.reject(error);
  });
```





# tokençš„å°è£…

```js
--å°è£…æˆapiæ¥å£
// è®¾ç½®
function setToken (value) {
  window.localStorage.setItem('token', value)
}

// å–å€¼
function getToken () {
  // è¿™é‡Œçš„ return å¿…é¡»è¦å†™ï¼Œå¦åˆ™å°†æ¥å¤–ç•Œå–ä¸åˆ°
  return window.localStorage.getItem('token')
}

// åˆ é™¤
function removeToken () {
  window.localStorage.removeItem('token')
}

// æš´éœ²ç»™å¤–ç•Œ
export { setToken, getToken, removeToken }
------ç»„ä»¶å†…æŒ‰éœ€å¯¼å…¥ 
import { setToken, getToken } from '@/utils/token.js'
// ç™»å½•æˆåŠŸåä¿å­˜token
 setToken(res.data.token) // è¿™å°±ç›¸å½“äºä¼ å‚ç»™å°è£…å¥½çš„api
----å¦‚æœä¸å°è£…çš„è¯å°±æ˜¯è¿™æ ·ç”¨
window.localStorage.setItem('token', res.data.token) //å°†æˆåŠŸåçš„tokenç»™tokenå­˜å‚¨
```



## éç»„ä»¶ä¸­è·³è½¬é¡µé¢

æ³¨é‡Šï¼šåœ¨jsé¡µé¢ä¸­å¤„ç†è¿‡æœŸtokenå¹¶è·³è½¬ç™»å½•é¡µé¢

```js
--å¯¼å…¥å°è£…å¥½çš„tokenæ¥å£
import { getToken, removeToken } from '@/utils/token.js'
----å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(
function (response){
    // 206è¡¨ç¤ºtokenè¿‡æœŸ
    if (response.data.code === 206) {
    // æç¤ºç”¨æˆ· token è¿‡æœŸ
    Message.error('token é”™è¯¯')
    // å°†è¿‡æœŸçš„ token æ¸…é™¤
    removeToken()
    // è·³è½¬åˆ°ç™»å½•é¡µé¢
    router.push('/login')
   }
 }
)
```



## åµŒå¥—è·¯ç”±

æ³¨é‡Šï¼šå½“ä¸šåŠ¡é€»è¾‘å¤æ‚ä»¥åå¦‚ä¸€ä¸ªç»„ä»¶åµŒå¥—å¤šä¸ªå­ç»„ä»¶ å°±éœ€è¦åµŒå¥—è·¯ç”±è¿›è¡Œè·³è½¬ç®¡ç†

```js
---ä¸€çº§è·¯ç”± å‡ºå£æ”¾App.vueå†…  <router-view></router-view>
import login from './views/login'
import home from './views/home'
----------------------------------
äºŒçº§è·¯ç”±
import data from '../views/home/data'
import data user '../views/home/user'

---- è·¯ç”±é¡µé¢ router.jsæ–‡ä»¶å†…å¯¼å…¥å­ç»„ä»¶
const router = new VueRouter({
routes:[
    {path:'/login', component:login},
    // æ­¤å¤„ children:[] å°±æ˜¯ä¸€çº§è·¯ç”±homeä¸‹çš„åµŒå¥—å­è·¯ç”±
    {path:'/home', component:home, children:[
    // å­è·¯ç”±ä¸‹é¢å¦‚æœæœ‰é¡µé¢ç»“æ„éœ€è¦è¿˜å¯ä»¥ç»§ç»­children:[]è¿›è¡ŒåµŒå¥—è·³è½¬
        {path:'/home/data', component:data},
        {path:'/home/user', component:user}
    ]},
  ]
})
------------
å­è·¯ç”±å‡ºå£ æ¯”å¦‚å­ç»„ä»¶åŒå±homeå°±æ”¾homeæ ¹ç»„ä»¶å†… <router-view></router-view>

```



## è·¯ç”±å…ƒä¿¡æ¯

æ³¨é‡Šï¼šç”¨äºè®¾ç½®æ˜¾ç¤ºé¡µé¢çš„ å…ƒæ ‡ç­¾meta å†…çš„ titleæ ‡é¢˜

```js
var router = new VueRouter({
  // æ·»åŠ å½“å‰é¡¹ç›®çš„è·¯ç”±é€‰é¡¹
  routes: [
    // è·¯ç”±é‡å®šå‘
 {
    {
    path: '/login', // ç™»å½•çš„è·¯ç”±
    component: Login,
    meta: { //è®¾ç½®è·¯ç”±å…ƒä¿¡æ¯
      msg: 'ç™»å½•'
     }
  },
    path:'/',
    redirect:'/home',
      children:[
      path: '/home/chart',
      component: chart,
      meta:{ // è®¾ç½®è·¯ç”±å…ƒä¿¡æ¯
      msg:'æˆ‘æ˜¯å…ƒä¿¡æ¯ğŸ˜'
    }
   ]
  }
]
-----å¯¼èˆªå®ˆå«
 // ä½¿ç”¨è·¯ç”±å‰¯æœ¬çš„å®ä¾‹å åˆ›å»º å‰ç½®å¯¼èˆªå®ˆå« å‡½æ•°
router.beforeEach((to, from, next) =>{
      next() // å†³å®šæ˜¯å¦è¦æ‰§è¡Œ
// å°†è·¯ç”±å…ƒä¿¡æ¯çš„å±æ€§å€¼èµ‹å€¼ç»™ æ–‡æ¡£çš„title æ ‡é¢˜æ˜¾ç¤º
  document.title = to.meta.msg
})
```







# å¯¼èˆªå®ˆå«

æ³¨é‡Šï¼šä»ä¸€ä¸ªè·¯ç”±ä¸­è·³è½¬åˆ°å¦ä¸€ä¸ªè·¯ç”±ä¸­æ—¶ï¼Œ å¦‚æœè¦æ‰§è¡Œä¸€äº›é€»è¾‘ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨å¯¼èˆªå®ˆå«ï¼Œ

- to   : è·³è½¬å»å“ªé‡Œ   (ç›®æ ‡è·¯ç”±çš„ä¿¡æ¯)
- from : ä»å“ªé‡Œæ¥ (å‘èµ·è·³è½¬çš„è·¯ç”± çš„ä¿¡æ¯ï¼Œå³æœ¬èº«ä¿¡æ¯)
- next(): å›è°ƒå‡½æ•°ï¼Œæ˜¯å¦æ‰§è¡Œè·³è½¬

æ³¨é‡Šï¼šåˆåˆ†ä¸º -> å‰ç½®å¯¼èˆªå®ˆå« å’Œ åç½®å¯¼èˆªå®ˆå«ï¼Œåœ¨è·¯ç”±æ–‡ä»¶å†…ä½¿ç”¨è·¯ç”±å®ä¾‹åæ–°å»ºä¸€ä¸ªå‡½æ•°

  å‡½æ•°å†…ä¹¦å†™è½å®ä»£ç å¹¶è°ƒç”¨æ’ä»¶å¯¼å…¥åå¦‚ NProgress.start(),åç½®ä¸€æ · æ”¹NProgress.done()

1. router.beforeEach((to,from,next) =>){è·¯ç”±è¿›å…¥å‰çš„å¤„ç†ä»£ç }; å…¨å±€å‰ç½®å¯¼èˆªå®ˆå«
2. router.afterEach((to,from) =>){//è·¯ç”±è¿›å…¥åçš„å¤„ç†ä»£ç }ï¼›     å…¨å±€åç½®å¯¼èˆªå®ˆå«



##æ­é…nprogressè¿›åº¦æ¡

æ³¨é‡Šï¼šè·¯ç”±å¯¼èˆªè·³è½¬æ—¶æ˜¾ç¤ºçš„è¿›åº¦æ¡æ•ˆæœ

- åœ¨å‰ç½®å®ˆå«(è·³è½¬å‰) å¼€å¯è¿›åº¦æ¡æ•ˆæœ
- åœ¨åç½®å®ˆå«(å®Œæˆè¿›å…¥å) å…³é—­è¿›åº¦æ¡

```js
// å¯¼å…¥è¿›åº¦æ¡æ’ä»¶ å’Œ cssæ ·å¼
import NProgress from 'nprogress'
import 'nprogress/nprogress.css'

// ä½¿ç”¨è·¯ç”±å‰¯æœ¬çš„å®ä¾‹å åˆ›å»º å‰ç½®å¯¼èˆªå®ˆå« å‡½æ•°
router.beforeEach((to, from, next) =>{
    // è®¾ç½®è¿›åº¦æ¡
      NProgress.start()
      next() // å†³å®šæ˜¯å¦è¦æ‰§è¡Œ
})
// åç½®å®ˆå«
router.afterEach((to, from) =>{
  //è®¾ç½®è¿›åº¦æ¡å…³é—­æ—¶é—´
  setTimeout(() =>{
    NProgress.done()
  },500)
})
```



## æ€»ç»“

æ³¨é‡Šï¼šè·¯ç”±æ‹¦æˆªå™¨æ”¾å·¥å…·æ–‡ä»¶å¤¹ axioså®ä¾‹å‰¯æœ¬ä¸‹é¢  ï¼Œtokenå­˜å–åˆ é™¤æ¥å£éƒ½å°è£…æ”¾å·¥å…·æ–‡ä»¶å¤¹tokenæ–‡ä»¶å†…ï¼Œè·¯ç”±è·³è½¬ä¸»è¦æ”¾è·¯ç”±æ–‡ä»¶å†…ï¼ŒåµŒå¥—è·¯ç”±ã€‚è·¯ç”±å…ƒä¿¡æ¯ã€å¯¼èˆªå®ˆå«ä¹Ÿéƒ½æ˜¯æ”¾è·¯ç”±æ–‡ä»¶ï¼›

axiosè¯·æ±‚éƒ½å°è£…å¥½æ”¾APIæ–‡ä»¶å†…ï¼Œ

å°è£…å¥½çš„æ–‡ä»¶æ ¹æ®éœ€è¦å¯ä»¥äº’ç›¸å¯¼å…¥è¿›è¡Œä½¿ç”¨å¤„ç†



# VUEXè¯¦è§£

æ³¨é‡Šï¼šğŸ˜ vuex æ˜¯ä¸“é—¨ç”¨äºvueåº”ç”¨ç¨‹åºçš„ çŠ¶æ€ç®¡ç† æ¨¡å¼ï¼Œ æœ¬è´¨æ˜¯ å…¬ç”¨æ•°æ®ç®¡ç†ä¸å…±äº«ï¼Œä¸»è¦ç”¨äºå¤§å‹å¤šé¡µé¢å¼€å‘ï¼Œæ•°æ®å¤ç”¨ æ•°æ®çŠ¶æ€å…±äº«ä¸ç®¡ç†

1. store  :  å»ºç«‹ä»“åº“å­˜æ”¾æ–‡ä»¶
   1. npm i vuex --save   : ä¸‹è½½
   2. å¯¼å…¥ 
   3. æ³¨å†Œ
   4. åˆ›å»ºå®ä¾‹ä»“åº“ï¼Œ
   5. ç»„ä»¶è®¿é—® ï¼š{{ this.$store.state.æ•°æ®å }}  

```js
-----main.js å¼€å‘ä¸­ä¼šå°†vuexæŠ½ç¦»å‡ºå»å°è£…
// å¯¼å…¥vuex
import Vuex from 'vuex'
// æ³¨å†ŒVuex
Vue.use(Vuex)
// åˆ›å»ºä¸€ä¸ªVuexä»“åº“å¯¹è±¡
var store = new Vuex.Store({
  state: {
    msg: 'æˆ‘æ˜¯vuexå…±äº«æ•°æ®'
  }
})

// æŒ‚è½½å‡ºå»
new Vue({
  router, // æŒ‚è½½è·¯ç”±
  store, // å°†vuexä»“åº“å®ä¾‹æ³¨å†Œåˆ°Vue
  render: h => h(App)
}).$mount('#app')

------ç»„ä»¶å†…ä½¿ç”¨
<div> æˆ‘æ˜¯vuex {{this.$store.state.msg}} </div>
æ€»ç»“ï¼šå¼€å‘ä¸­å°†æŠ½ç¦»å‡ºå»ä¸“é—¨æ”¾ä¸€ä¸ªä»“åº“æ–‡ä»¶  store
```



## vuexå•ç‹¬å°è£…

- åˆ›å»ºstore ä»“åº“ æ–°å»ºindex.js æ–‡ä»¶
- å¯¼å…¥vue å’Œvuex
- æ³¨å†Œvuex å¹¶åˆ›å»ºå®ä¾‹ä»“åº“
- å°†å°è£…å¥½çš„æ¥å£æš´éœ²å‡ºå»
- åœ¨main.js å¯¼å…¥å¹¶æŒ‚è½½å³å¯
- ç»„ä»¶å†… {{this.$store.state.æ•°æ®å}};ä½¿ç”¨å³å¯

æ€»ç»“ï¼šçŠ¶æ€ç®¡ç†stateå†…çš„ æ•°æ®å¯ä»¥å¢åŠ ï¼Œå¤šä¸ªç»„ä»¶å¯ä»¥å…±äº«æ•°æ®å¹¶ä½¿ç”¨ï¼ŒæŸä¸ªç»„ä»¶ä¿®æ”¹äº†storeçš„ç»„ä»¶æ•°æ®ï¼Œå…±äº«æ•°æ®çš„æˆå‘˜ç»„ä»¶å†…ä½¿ç”¨çš„æ•°æ®å°†ä¸€èµ·è¢«æ”¹å˜ğŸ¤”

```js
// ä¸“é—¨ç®¡ç†Vuex
import Vue from 'vue'
import Vuex from 'vuex'

// æ³¨å†ŒVuex
Vue.use(Vuex)
// åˆ›å»ºVuexå®ä¾‹å¯¹è±¡
var store = new Vuex.Store({
    // å…¬ç”¨æ•°æ®
    state: {
        msg:'æˆ‘æ˜¯vuex',
        userInfo:{} // ç”¨æˆ·ä¿¡æ¯ å¯ä»¥ä»ç™»å½•é¡µé¢èµ‹å€¼è¿‡æ¥
    }
})
// æš´éœ²å‡ºå»
export default store

---------main.js å¯¼å…¥ å¹¶æŒ‚è½½
import store from '@store/index.js'

new Vue({
  store, // å°†vuexä»“åº“å®ä¾‹æŒ‚è½½åˆ°Vue
  router, // æŒ‚è½½è·¯ç”±
  render: h => h(App)
}).$mount('#app')
-----æŸç»„ä»¶
// å°†ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ èµ‹å€¼ç»™Vuexçš„stateæ•°æ®ç®¡ç†çš„userInfo
this.$store.state.userInfo = this.useInfo 
ç»„ä»¶å†…ä½¿ç”¨ 
<img :src="baseURL + '/' + this.$store.state.userInfo.avatar" alt="" />
<span class="span1">{{ this.$store.state.userInfo.username }},æ‚¨å¥½</span>
```



# ç»„ä»¶ä¼ å€¼

æ³¨é‡Šï¼šçˆ¶ä¼ -> å­æ¥props;  å­ä¼ $emit çˆ¶æ¥ @å±æ€§å



## çˆ¶ä¼ å­

- çˆ¶ä¼ å­ï¼š ==å•é¡¹æ•°æ®æµ== åªèƒ½åœ¨çˆ¶ç»„ä»¶è¿›è¡Œä¿®æ”¹ï¼Œä¸èƒ½åœ¨å­ç»„ä»¶å†…ä¿®æ”¹
- åœ¨çˆ¶ç»„ä»¶çš„ å­æ ‡ç­¾å†…å®šä¹‰ å±æ€§å='å±æ€§å€¼'ï¼Œ å­ç»„ä»¶æ¥æ”¶ ->  props:['abc'],

```js
<template>
  <div class="f">
    <h4>çˆ¶ç»„ä»¶ {{msg}} </h4>
<!-- å°†å­ç»„ä»¶å½“åšæ ‡ç­¾ä½¿ç”¨ å°†è¦ä¼ é€çš„å€¼ã€èµ‹å€¼ç»™è‡ªå®šä¹‰å±æ€§abc -->
    <son :abc="msg"></son>

<!-- åªèƒ½é€šè¿‡ç»„ç»„ä»¶è¿›è¡Œæ•°æ®ä¿®æ”¹ -->
<button @click="changAbc">ç‚¹æˆ‘ä¿®æ”¹msg</button>
  </div>
</template>
<script>
// çˆ¶ä¼ å­  å¯¼å…¥å­ç»„ä»¶
import son from "./son";
export default {
  data() {
    return {
      msg: "father",
    };
  },
  // æ³¨å†Œå­ç»„ä»¶
  components: {
    son,
  },
 methods: {
  // ä¿®æ”¹æ•°æ®
  changAbc() {
   this.msg = "changed";
   },
 },
};
</script>

---------å­ç»„ä»¶æ¥æ”¶ä½¿ç”¨
<template>
<div class="s">
 <h4>å­ç»„ä»¶</h4>
 <!-- ä¼ é€’è¿‡æ¥çš„å±æ€§é€šè¿‡propsæ¥æ”¶å ä¸dataçš„ä½¿ç”¨æ–¹å¼ä¸€æ · -->
   <div>è¿™æ˜¯çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„ {{abc}} </div>
</div>
</template>
<script>
export default {
// å­ç»„ä»¶æ¥æ”¶ è‡ªå®šä¹‰å±æ€§å˜é‡abc (ä¸dataçš„ä½¿ç”¨æ–¹å¼ä¸€æ ·)
 props:['abc']
}
</script>

------æ ¹ç»„ä»¶App.vue
// å°†çˆ¶ç»„ä»¶å½“åšæ ‡ç­¾å±•ç¤º
<father></father>
//å¯¼å…¥çˆ¶ç»„ä»¶
import father from '.components/father'
export defatlt {
  // æ³¨å†Œçˆ¶ç»„ä»¶
    components:{
        fathet
    }
}
```



## å­ä¼ çˆ¶

æ³¨é‡Šï¼šé€šè¿‡$emit('æ–¹æ³•å', å‚æ•°å€¼)ä¼ é€’ï¼Œ çˆ¶ç»„ä»¶æ¥æ”¶ -> å­ç»„ä»¶æ ‡ç­¾å†… @æ–¹æ³•å='è‡ªå®šä¹‰æ–¹æ³•å'

ä½¿ç”¨ï¼šå°†å±æ€§åå½“åšå‚æ•°ä¼ å…¥äº‹ä»¶æ–¹æ³•å†…ï¼Œè¿›è¡Œèµ‹å€¼å³å¯

- å­ä¼ çˆ¶ä¹Ÿå¯ä»¥ä¸å¸¦å‚æ•°ç›´æ¥ï¼Œæ“ä½œè¿˜æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå«åšå­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶æ–¹æ³•

```js
--å­ç»„ä»¶
<template>
<div class="s">
 <h4>å­ç»„ä»¶</h4>
<div>å­ç»„ä»¶çš„ {{msg}} </div>
<button @click="pass">ç‚¹æˆ‘å‘çˆ¶ç»„ä»¶ä¼ å€¼</button>
</div>
</template>
<script>
export default {
  data() {
      return {
          msg:'son'
      };
  },
  methods:{
      pass(){
    // å°†å‚æ•°ä»å­ç»„ä»¶ä¼ å…¥çˆ¶ç»„ä»¶ passValueå°±æ˜¯ç»™çˆ¶ç»„ä»¶é‚£è¾¹æ¥æ”¶ç”¨çš„æ–¹æ³•å msgå°±æ˜¯å‚æ•°
    this.$emit('passValue', this.msg)
      }
  }
}
</script>

----------çˆ¶ç»„ä»¶
<template>
 <div class="f">
   <h3>çˆ¶ç»„ä»¶</h3>

   <!-- ä½¿ç”¨å­ç»„ä»¶ -->
   <!-- å­ç»„ä»¶ä¼ é€’çš„passValueæ–¹æ³• åœ¨å­ç»„ä»¶æ ‡ç­¾ä¸Š @æ¥æ”¶ä½¿ç”¨ -->
   <son @passValue="getValue"></son>
   <!-- æ¥æ”¶åçš„å€¼å¤„ç†åä½¿ç”¨ -->
   <div>{{ mymsg }}</div>
 </div>
</template>
<script>
// å¯¼å…¥å­ç»„ä»¶
import son from "./son";
export default {
  // æ³¨å†Œå­ç»„ä»¶
  components: {
    son,
  },
  data() {
    return {
      mymsg: "",
    };
  },
  methods: {
    // å°†@æ¥æ”¶çš„passValueå½“åšå‚æ•°ä½¿ç”¨ å®ƒå¯¹åº”çš„å°±æ˜¯å­ç»„ä»¶çš„this.msg
    getValue(passValue) {
    // å°†æ¥æ”¶çš„å‚æ•°èµ‹å€¼ç»™dataä¸­çš„mymsg
      this.mymsg = passValue
    },
  },
};
</script>

------æ ¹ç»„ä»¶App.vue
// å°†çˆ¶ç»„ä»¶å½“åšæ ‡ç­¾å±•ç¤º
<father></father>
//å¯¼å…¥çˆ¶ç»„ä»¶
import father from '.components/father'
// å¯¼å…¥å­ç»„ä»¶ 
import son from './components/father'
export defatlt {
  // æ³¨å†Œçˆ¶å­ç»„ä»¶
    components:{
        fathet,
        son
    }
}
```



## å¯Œæ–‡æœ¬ç¼–è¾‘å™¨

æ³¨é‡Šï¼švueç”Ÿæ€èµ„æºå†…éƒ½æœ‰å„ç±»æ’ä»¶å’Œèµ„æºä½¿ç”¨

















